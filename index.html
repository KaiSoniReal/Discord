<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Start Audio - Ultimate Workaround</title>
    <style>
        /* Fullscreen overlay for fallback */
        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
            z-index: 9999;
        }

        body, html {
            margin: 0;
            padding: 0;
        }

        /* Hide video and iframe */
        video, iframe {
            display: none;
        }
    </style>
</head>
<body>

<!-- Overlay for manual fallback -->
<div id="overlay">
    ▶️ Click, tap, move cursor, scroll, or press a key to start audio
</div>

<!-- Hidden silent video for autoplay priming -->
<video id="primerVideo" muted playsinline>
    <source src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAANtZGF0AAAA1m1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAOYaWF0YQAAAAAAAAACAAIAAAABAAAAAAEb2RhdGEAAAD4AAAAAQAAAAEAAAEAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==" type="video/mp4">
</video>

<!-- Hidden audio player -->
<audio id="mainAudio">
    <source src="Jewelxxt luagh.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

<script>
    const overlay = document.getElementById('overlay');
    const primerVideo = document.getElementById('primerVideo');
    const mainAudio = document.getElementById('mainAudio');

    // Function to play main audio
    function playMainAudio() {
        mainAudio.play().then(() => {
            overlay.style.display = 'none';
            console.log('Main audio playing successfully');
        }).catch(err => {
            console.error('Main audio playback failed:', err.message);
            overlay.textContent = '⚠️ Audio blocked. Click, tap, move cursor, scroll, or press a key.';
        });
    }

    // Function to try autoplay with retries
    function tryAutoplay(attempts = 0, maxAttempts = 5) {
        console.log(`Autoplay attempt ${attempts + 1}`);
        primerVideo.play().then(() => {
            console.log('Primer video played successfully');
            primerVideo.pause();
            playMainAudio();
        }).catch(err => {
            console.error('Primer video failed:', err.message);
            if (attempts < maxAttempts) {
                setTimeout(() => tryAutoplay(attempts + 1, maxAttempts), 500);
            } else {
                console.log('All autoplay attempts failed');
                overlay.textContent = '⚠️ Autoplay blocked. Click, tap, move cursor, scroll, or press a key.';
            }
        });
    }

    // Simulate user interaction
    function simulateInteraction() {
        const events = [
            new MouseEvent('click', { bubbles: true }),
            new PointerEvent('pointerdown', { bubbles: true }),
            new PointerEvent('pointermove', { bubbles: true }),
            new Event('scroll', { bubbles: true }),
            new KeyboardEvent('keydown', { bubbles: true, key: ' ' })
        ];
        events.forEach(event => {
            document.dispatchEvent(event);
            console.log('Simulated event:', event.type);
        });
    }

    // Trigger autoplay on load
    window.addEventListener('load', () => {
        console.log('Page loaded, attempting autoplay');
        simulateInteraction();
        tryAutoplay();
    });

    document.addEventListener('DOMContentLoaded', () => {
        console.log('DOM content loaded, attempting autoplay');
        tryAutoplay();
    });

    // Fallback: Trigger on any user interaction
    const tryManualPlay = () => {
        console.log('Manual interaction detected, attempting to play');
        playMainAudio();
        // Remove all listeners after first successful trigger
        document.removeEventListener('click', tryManualPlay);
        document.removeEventListener('pointerdown', tryManualPlay);
        document.removeEventListener('pointermove', tryManualPlay);
        document.removeEventListener('touchstart', tryManualPlay);
        document.removeEventListener('scroll', tryManualPlay);
        document.removeEventListener('keydown', tryManualPlay);
    };

    // Add multiple gesture listeners
    ['click', 'pointerdown', 'pointermove', 'touchstart', 'scroll', 'keydown'].forEach(eventType => {
        document.addEventListener(eventType, tryManualPlay, { once: true });
        console.log(`Added listener for ${eventType}`);
    });
</script>

</body>
</html>
